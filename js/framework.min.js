/**
 * FW - eDetail Presentation Framework
 *
 * Version 0.00.001
 *
 * DO NOT MODIFY
 */

!function(e,t){var n={current:0,screens:[]},r=!1,i=0,s=!1,o=!1;e.clickEvent="touchend mouseup",e.SETTINGS={debug:!1,preload:!1,primary:"splash",transition:"R2L",swipepath:"default",locknav:!0,faketouch:!1},e.SLIDESJS=!1,e.INIT=function(){e.LOG("DEBUG MODE ON!!!!!!!"),e.SLIDESJS?(e.LOG("Calling framework initialization"),u()):(e.LOG("slides.js not loaded, delaying initialization"),setTimeout(e.INIT,100))};var u=function(){e.LOG("Starting initialization..."),document.addEventListener("touchmove",function(e){e.preventDefault()},!1),t(".scrollable").on("touchmove",function(e){e.stopPropagation()}),e.SETTINGS.debug&&t("body").addClass("debug"),t.ajaxSettings.cache=!1,n.screens=[document.getElementById("screen1"),document.getElementById("screen2")],r=e.SETTINGS.swipepath,e.LOG("Loading Sitemap JSON"),t.ajax({type:"GET",url:"js/sitemap.json",dataType:"json",timeout:300,error:function(){e.LOG("Sitemap load error: Ajax Request Timed Out"),e.INIT()},success:function(n){return!n||n.length<1?(e.LOG("Sitemap load error: Response is Empty"),!1):(e.LOG("Sitemap loaded"),e.SITEMAP.pages=n.sitemap.pages||[],e.SITEMAP.buttons=n.sitemap.buttonbar||[],e.SITEMAP.paths=n.sitemap.paths||{},e.SITEMAP.loaded=!0,e.LOG("Setting default swipe path"),e.SITEMAP.setPath(e.SETTINGS.swipepath),e.LOG("Creating Page index"),e.SITEMAP.createIndex(e.SITEMAP.pages),e.LOG("Triggering FW:SITEMAP:load"),t(document.body).trigger("FW:SITEMAP:load"),e.LOG("Building Navigation"),t("#navigation").append(e.NAV.generate(e.SITEMAP.pages,0,"nav-",!0,!1,!0)),e.LOG("Building Table of Contents"),t("#toc").append(e.NAV.generate(e.SITEMAP.pages,0,"toc-")),e.LOG("Building Button Bar"),t("#buttonbar").append(e.NAV.buttonBar(e.SITEMAP.buttons)),e.LOG("Loading Default Page"),e.PAGE.load(e.SETTINGS.primary,"FADE"),undefined)}}),t("#navbutton").on(e.clickEvent,function(t){return console.log("clicked Nav"),t.preventDefault(),e.NAV.toggle(),!1}),t("#screens").on(e.clickEvent,function(){e.NAV.hide()}),t("#lb_overlay, #lb_close").on(e.clickEvent,function(t){return t.preventDefault(),e.LIGHTBOX.hide(t),!1}),e.SETTINGS.debug&&t("#console_tab").on(e.clickEvent,function(){t("#debug").toggleClass("open")}),e.SETTINGS.faketouch&&(t("*").on("mousedown",function(t){e.dragging=!0,e.drag.x=t.x,e.drag.y=t.y}),t("*").on("mouseup",function(){e.dragging=!1,e.drag.x=-1,e.drag.y=-1}),t("*").on("mouseout",function(){e.dragging=!1,e.drag.x=-1,e.drag.y=-1}),t("*").on("mousemove",function(n){if(e.dragging){var r=!1;n.x-e.drag.x>100&&(r="swipeRight"),n.x-e.drag.x<-100&&(r="swipeLeft"),n.y-e.drag.y>100&&(r="swipeDown"),n.y-e.drag.y<-100&&(r="swipeUp"),r&&(t(n.target).trigger(r,n),e.dragging=!1,e.drag.x=-1,e.drag.y=-1)}}))};e.currentPage=function(){return s},e.PAGE={id:"",type:"",file:"",title:"",children:[],onLoadCallbacks:{},onVisibleCallbacks:{}},e.PAGE.next=function(){!o&&i<r.length-1&&e.PAGE.load(r[++i],"R2L")},e.PAGE.prev=function(){!o&&i>0&&e.PAGE.load(r[--i],"L2R")},e.PAGE.lock=function(){o=!0,t("#"+e.PAGE.formatId(e.PAGE.id)).addClass("locked")},e.PAGE.unlock=function(){o=!1,t("#"+e.PAGE.formatId(e.PAGE.id)).removeClass("locked")},e.PAGE.formatId=function(e){return e.replace(/\./g,"-")},e.PAGE.get=function(t){return t=e.PAGE.formatId(t),e.SITEMAP.index[t]?e.SITEMAP.index[t]:!1},e.PAGE.load=function(u,f){if(e.LOG("Starting Page Load for page ["+u+"]"),f=f||"NONE",!e.SITEMAP.loaded)return e.LOG("Page load error: No Sitemap"),!1;if(s==u)return e.LOG("Page load error: Already on Requested Page"),e.LIGHTBOX.hide(),!1;if(o&&e.SETTINGS.locknav)return e.LOG("Page load error: Page is Locked"),!1;s=u,e.LOG("Preparing screen "+(1-n.current)+" for off-screen rendering"),n.screens[1-n.current].className="SCREEN "+f+" loading";var l=e.PAGE.get(u);return l?(e.PAGE.id=l.id||"",e.PAGE.type=l.type||"",e.PAGE.file=l.file||"",e.PAGE.title=l.title||"",e.PAGE.children=l.children||[],e.PAGE.parent=l.parent||!1,e.LOG("Starting Asynchronous Request for Page..."),t.ajax({type:"GET",url:e.PAGE.file,dataType:"html",timeout:300,error:function(){e.LOG("Page load error: Ajax Request Timed Out"),s=null,e.PAGE.load(u,f)},success:function(o){if(!o||o.length<1)return e.LOG("Page load error: Response is Empty"),!1;for(e.LOG("Page loaded"),e.NAV.hide(),e.LIGHTBOX.hide(),e.PAGE.unlock(),t("#navigation li").removeClass("active").removeClass("open"),t("#nav-"+e.PAGE.formatId(e.PAGE.id)).addClass("active"),t("#nav-"+e.PAGE.formatId(e.PAGE.id)).parents("li").addClass("open"),e.PAGE.children.length>0&&t("#nav-"+e.PAGE.formatId(e.PAGE.id)).addClass("open"),parent=e.PAGE.parent;parent;){e.LOG("Looping through page parents..."),t("#nav-"+e.PAGE.formatId(parent.id)).addClass("open");var u=e.PAGE.get(parent.id);parent=u?u.parent||!1:!1}if(t("#buttonbar li").removeClass("active"),n.current=1-n.current,e.LOG("Populating screen "+n.current+" with content"),n.screens[n.current].innerHTML=o,e.LOG("Killing scrolling on screen "+n.current),t(n.screens[n.current]).find(".scrollable").on("touchmove",function(e){e.stopPropagation()}),e.LOG("Deactivating screen "+(1-n.current)),t(n.screens[1-n.current]).removeClass("active"),e.LOG("Activating screen "+n.current),t(n.screens[n.current]).removeClass("hidden").addClass("active"),setTimeout(function(){e.LOG("Animating screen "+n.current+" into view..."),t(n.screens[n.current]).removeClass("loading")},10),setTimeout(function(){e.LOG("Hiding screen "+(1-n.current)+"..."),t(n.screens[1-n.current]).addClass("hidden")},500),"function"==typeof e.PAGE.onLoadCallbacks[e.PAGE.id]&&e.PAGE.onLoadCallbacks[e.PAGE.id](),"function"==typeof e.PAGE.onVisibleCallbacks[e.PAGE.id]&&(t(n.screens[1-n.current]).addClass("hidden"),setTimeout(e.PAGE.onVisibleCallbacks[e.PAGE.id],500)),r[i]!=s)for(var f=0;f<=r.length;f++){if(f==r.length){e.SITEMAP.setPath(e.SETTINGS.swipepath);break}if(r[f]==s){i=f;break}}e.TRACKING.track("pageview",e.PAGE.title,e.PAGE.id)}}),undefined):(e.LOG("Page load error: Could not retrieve page information for "+u),!1)},e.PAGE.onLoad=function(t,n){"function"==typeof n&&(e.PAGE.onLoadCallbacks[t]=n)},e.PAGE.onVisible=function(t,n){"function"==typeof n&&(e.PAGE.onVisibleCallbacks[t]=n)},e.SITEMAP={loaded:!1},e.SITEMAP.setPath=function(t){r="object"==typeof e.SITEMAP.paths[t]?e.SITEMAP.paths[t]:e.SITEMAP.paths[e.SETTINGS.swipepath];for(var n=0;n<r.length;n++)if(r[n]==s)return i=n,undefined;i=0},e.SITEMAP.createIndex=function(t,n){"object"!=typeof e.SITEMAP.index&&(e.SITEMAP.index={});for(var r=0;r<t.length;r++)"object"!=typeof e.SITEMAP.index[t[r].id]&&(e.SITEMAP.index[e.PAGE.formatId(t[r].id)]=t[r]),"object"==typeof n&&(e.SITEMAP.index[e.PAGE.formatId(t[r].id)].parent=n),"object"==typeof t[r].children&&e.SITEMAP.createIndex(t[r].children,t[r])},e.NAV={active:e.SETTINGS.primary},e.NAV.toggle=function(){t("#navigation").hasClass("open")?e.NAV.hide():e.NAV.show()},e.NAV.itemToggle=function(e){t("#"+e).hasClass("open")?t("#"+e).removeClass("open"):(t("#navigation .open").removeClass("open"),t("#"+e).addClass("open"))},e.NAV.show=function(){return e.SETTINGS.locknav&&o?!1:(t("#navigation").addClass("open"),t("#navbutton").addClass("active"),undefined)},e.NAV.hide=function(){t("#navigation").removeClass("open"),t("#navbutton").removeClass("active")},e.NAV.generate=function(t,n,r,i,s,o){r=r||"nav-",i=i||!1,s=s||!1,o=o||!1;for(var u="<ul>",a=0;a<t.length;a++)if((s||"hidden"!=t[a].type)&&(o||"button"!=t[a].type)){switch(u+='<li id="'+r+e.PAGE.formatId(t[a].id)+'" class="'+t[a].type+'">',t[a].type){case"header":var f="";i?f="FW.NAV.itemToggle('"+r+e.PAGE.formatId(t[a].id)+"')":"object"==typeof t[a].children&&t[a].children.length>0&&(f="FW.PAGE.load('"+t[a].children[0].id+"', '"+e.SETTINGS.transition+"');"),u+='<a href="javascript:'+f+'">'+t[a].title+"</a>";break;case"slide":u+="<a href=\"javascript:FW.PAGE.load('"+t[a].id+"', '"+e.SETTINGS.transition+"')\">",u+=t[a].title,u+="</a>";break;case"button":u+='<a href="'+t[a].file+'">',u+=t[a].title,u+="</a>"}"object"==typeof t[a].children&&(u+=e.NAV.generate(t[a].children,n+1,r,i,s,o)),u+="</li>"}return u+="</ul>"},e.NAV.buttonBar=function(t,n){n=n||"bbar-";for(var r="<ul>",i=0;i<t.length;i++)"button"==t[i].type&&(r+='<li id="'+n+e.PAGE.formatId(t[i].id)+'" class="'+t[i].type+'">',r+='<a href="'+t[i].file+'">'+t[i].title+"</a>",r+="</li>");return r+="</ul>"},e.TABS={},e.TABS.show=function(n){if(!o){for(var r=e.PAGE.formatId(s),i=t("#"+r)[0].className.match(/(show-tab-[0-9]+)/),u=0;null!=i&&u<i.length;u++)t("#"+r).removeClass(i[u]);t(".tab").removeClass("active"),t("#"+e.PAGE.formatId(s)).addClass("show-"+n),t("#"+e.PAGE.formatId(s)+" ."+n).addClass("active")}},e.LIGHTBOX={container:document.getElementById("lightbox"),content:document.getElementById("lb_content")},e.LIGHTBOX.show=function(n,r,i){switch(r=r||"passed",i=i||"",e.NAV.hide(),r){case"ajax":return t.get(n,function(n){e.LIGHTBOX.content.innerHTML=n,e.LIGHTBOX.container.className=i+" active",t(e.LIGHTBOX.content).find(".scrollable").on("touchmove",function(e){e.stopPropagation()})}),undefined;case"image":return e.LIGHTBOX.content.innerHTML='<img src="'+n+'" alt="">',e.LIGHTBOX.container.className=i+" active",undefined;case"inline":return t("#"+n).length>0&&(e.LIGHTBOX.content.innerHTML=t("#"+n).html(),e.LIGHTBOX.container.className=i+" active"),undefined;case"passed":default:return e.LIGHTBOX.content.innerHTML=n,e.LIGHTBOX.container.className=i+" active",undefined}},e.LIGHTBOX.hide=function(){e.LIGHTBOX.container.className="",e.LIGHTBOX.content.innerHTML=""},e.TRACKING={callbacks:[],iframe:!1},e.TRACKING.track=function(t,n,r){var i={Track_Element_Description_vod__c:n,Track_Element_Id_vod__c:r,Track_Element_Type_vod__c:t},s="veeva:saveObject(";s+="Call_Clickstream_vod__c),",s+="value("+JSON.stringify(i)+"),",s+="callback(FW.TRACKING.result)","object"!=typeof e.TRACKING.iframe&&(e.TRACKING.iframe=document.createElement("iframe"),e.TRACKING.iframe.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:0px;width:1px;height:1px;"),e.TRACKING.iframe.setAttribute("id","FW_TRACKING_IFRAME"),document.body.appendChild(e.TRACKING.iframe)),e.TRACKING.iframe.src=s},e.TRACKING.addCallback=function(t){"function"==typeof t&&e.TRACKING.callbacks.push(t)},e.TRACKING.result=function(t){for(var n=0;n<e.TRACKING.callbacks.length;n++)e.TRACKING.callbacks[n](t)},e.LOG=function(n){e.SETTINGS.debug&&(t("#console").append(n+"<br>"),t("#console")[0].scrollTop=t("#console")[0].scrollHeight)},t(function(){e.INIT()})}(FW=window.FW||{},Zepto)