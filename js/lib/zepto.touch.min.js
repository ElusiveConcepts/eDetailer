//     Zepto.js
//     (c) 2010-2013 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

(function(e){function a(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function f(){s=null;if(t.last){t.el.trigger("longTap");t={}}}function l(){if(s)clearTimeout(s);s=null}function c(){if(n)clearTimeout(n);if(r)clearTimeout(r);if(i)clearTimeout(i);if(s)clearTimeout(s);n=r=i=s=null;t={}}function h(e){return e.pointerType==e.MSPOINTER_TYPE_TOUCH&&e.isPrimary}var t={},n,r,i,s,o=750,u;e(document).ready(function(){var p,d,v=0,m=0,g;if("MSGesture"in window){u=new MSGesture;u.target=document.body}e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(n){t.el.trigger("swipe");t.el.trigger("swipe"+n)}}).on("touchstart MSPointerDown",function(r){if(r.type=="MSPointerDown"&&!h(r))return;g=r.type=="MSPointerDown"?r:r.touches[0];p=Date.now();d=p-(t.last||p);t.el=e("tagName"in g.target?g.target:g.target.parentNode);n&&clearTimeout(n);t.x1=g.pageX;t.y1=g.pageY;if(d>0&&d<=250)t.isDoubleTap=true;t.last=p;s=setTimeout(f,o);if(u&&r.type=="MSPointerDown")u.addPointer(r.pointerId)}).on("touchmove MSPointerMove",function(e){if(e.type=="MSPointerMove"&&!h(e))return;g=e.type=="MSPointerMove"?e:e.touches[0];l();t.x2=g.pageX;t.y2=g.pageY;v+=Math.abs(t.x1-t.x2);m+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp",function(s){if(s.type=="MSPointerUp"&&!h(s))return;l();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)i=setTimeout(function(){t.el.trigger("swipe");t.el.trigger("swipe"+a(t.x1,t.x2,t.y1,t.y2));t={}},0);else if("last"in t)if(v<30&&m<30){r=setTimeout(function(){var r=e.Event("tap");r.cancelTouch=c;t.el.trigger(r);if(t.isDoubleTap){t.el.trigger("doubleTap");t={}}else{n=setTimeout(function(){n=null;t.el.trigger("singleTap");t={}},250)}},0)}else{t={}}v=m=0}).on("touchcancel MSPointerCancel",c);e(window).on("scroll",c)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(Zepto)